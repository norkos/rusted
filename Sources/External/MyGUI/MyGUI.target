TARGET:=MyGUI
TYPE:=custom

MYGUI_DIR:=$(BUILD)/MyGUI
MYGUI_SRC:=$(TARGET_BASE)/MyGUI_3.2.0
MYGUI_ARTEFACT:=$(BUILD)/libMyGUIEngine.so.3.2.0

ifneq ($(CMAKE_TOOLCHAIN_FILE),)
  $(info using $(CMAKE_TOOLCHAIN_FILE))
  CMAKE_TOOLCHAIN_OPTIONS:=-DCMAKE_TOOLCHAIN_FILE=$(CMAKE_TOOLCHAIN_FILE)
endif

.PHONY: MyGUI
MyGUI: $(MYGUI_ARTEFACT)

$(MYGUI_ARTEFACT): $(OGRE_ARTEFACT) OGRE
	echo $(OGRE_SRC) $(OGRE_DIR)
	mkdir -p $(MYGUI_DIR)
	cd $(MYGUI_DIR) && \
		cmake $(MYGUI_SRC) $(CMAKE_TOOLCHAIN_OPTIONS) -DMYGUI_RENDERSYSTEM=2 -DOGRE_SOURCE=$(OGRE_SRC) -DOGRE_BUILD=$(OGRE_DIR) \
			-DMYGUI_DEPENDENCIES_DIR=$(OGREDEPS_DIR)/ogredeps && \
		make -j1 MyGUIEngine MyGUI.OgrePlatform
	cp -v $(MYGUI_DIR)/lib/* $(BUILD)

