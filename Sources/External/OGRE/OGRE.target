TARGET:=OGRE
TYPE:=custom

OGRE_SRC:=$(TARGET_BASE)/ogre_src_v1-8-1
OGREDEPS_PACKAGE_NAME:=$(TARGET_BASE)/ogredeps.tar.gz

OGREDEPS_DIR:=$(BUILD)/OGREDEPS
OGRE_DIR:=$(BUILD)/OGRE/ogre_src_v1-8-1/

.PHONY: OGRE OGREDEPS

OGRE: OGREDEPS

OGREDEPS:
	mkdir -p $(OGREDEPS_DIR)
	cd $(OGREDEPS_DIR) && \
		tar xf $(OGREDEPS_PACKAGE_NAME) && \
		cmake . && \
		make

OGRE_CMAKE_OPTIONS:=-DOGRE_BUILD_COMPONENT_PAGING:BOOL="0" \
    -DOGRE_BUILD_COMPONENT_PROPERTY:BOOL="0" -DOGRE_BUILD_COMPONENT_RTSHADERSYSTEM:BOOL="0" \
    -DOGRE_BUILD_TOOLS:BOOL="0" -DOGRE_INSTALL_TOOLS:BOOL="0" -DOGRE_BUILD_COMPONENT_TERRAIN:BOOL="0" \
    -DOGRE_BUILD_PLUGIN_PFX:BOOL="0" -DOGRE_BUILD_PLUGIN_PCZ:BOOL="0" \
    -DOGRE_BUILD_PLUGIN_BSP:BOOL="0" -DOGRE_BUILD_SAMPLES:BOOL="0" \
    -DOGRE_STATIC:BOOL="1"

OGRE:
	mkdir -p $(OGRE_DIR)
	cd $(OGRE_DIR) && \
		cmake $(OGRE_CMAKE_OPTIONS) $(OGRE_SRC) && \
		make

